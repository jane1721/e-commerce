# API Specification

## 1️⃣ 잔액 충전 / 조회 API

| Method | Endpoint                      | Description | Request Body                                        | Response Body                                                                                                                                                               |
|--------|-------------------------------|-------------|-----------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| POST   | `/api/users/charge`           | 잔액 충전       | {<br/> "userId": "123",<br/> "amount": 10000<br/> } | {<br/> "timestamp": "2025-01-05T16:41:35.943",<br/> "message": "충전 성공하였습니다.",<br/> "status": "200 OK",<br/> "content": {<br/> "currentBalance": 20000<br/> }<br/> }         |
| GET    | `/api/users/{userId}/balance` | 잔액 조회       | -                                                   | {<br/> "timestamp": "2025-01-05T16:45:24.354",<br/> "message": "Success",<br/> "status": "200 OK",<br/> "content": {<br/> "userId": "1",<br/> "amount": 20000<br/> }<br/> } |

---

## 2️⃣ 상품 조회 API

| Method | Endpoint     | Description | Request Body | Response Body                                                                                                                                                                                                                                                                                                                   |
|--------|--------------|-------------|--------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| GET    | `/api/items` | 상품 목록 조회    | -            | {<br/> "timestamp": "2025-01-05T16:51:49.978",<br/> "message": "Success",<br/> "status": "200 OK",<br/> "content": [<br/> {<br/> "itemId": "1",<br/> "name": "Item A",<br/> "price": 5000,<br/> "stock": 10<br/> },<br/> {<br/> "itemId": "2",<br/> "name": "Item B",<br/> "price": 10000,<br/> "stock": 5<br/> }<br/> ]<br/> } |

---

## 3️⃣ 선착순 쿠폰 발급 및 조회 API

| Method | Endpoint                      | Description | Request Body                | Response Body                                                                                                                                                                                                                                                                                                                                                                                             |
|--------|-------------------------------|-------------|-----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| POST   | `/api/coupons/claim`          | 쿠폰 발급       | {<br/> "userId": "1"<br/> } | {<br/> "timestamp": "2025-01-05T17:25:44.787",<br/> "message": "쿠폰 발급 성공하였습니다.",<br/> "status": "200 OK",<br/> "content": {<br/> "code": "DISCOUNT-10"<br/> }<br/> }                                                                                                                                                                                                                                      |
| GET    | `/api/coupons/users/{userId}` | 보유 쿠폰 조회    | -                           | {<br/> "timestamp": "2025-01-05T17:26:47.617",<br/> "message": "Success",<br/> "status": "200 OK",<br/> "content": [<br/> {<br/> "code": "DISCOUNT-10",<br/> "discountPercent": 10,<br/> "expiryDate": "2025-03-31T23:59:59",<br/> "used": false<br/> },<br/> {<br/> "code": "DISCOUNT-20",<br/> "discountPercent": 20,<br/> "expiryDate": "2025-01-31T23:59:59",<br/> "used": false<br/> }<br/> ]<br/> } |

---

## 4️⃣ 주문 / 결제 API

### 4.1 주문 API
| Method | Endpoint           | Description    | Request Body                                                                                                                                                                                    | Response Body                                                                                                                                                                                                                                                                                                                                                                              |
|--------|--------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| POST   | `/api/orders`      | 주문 생성          | {<br/> "userId": "1",<br/> "orderItems": [<br/> {<br/> "itemId": "1",<br/> "quantity": 2<br/> },<br/> {<br/> "itemId": "2",<br/> "quantity": 5<br/> }<br/> ],<br/> "code": "DISCOUNT-10"<br/> } | {<br/> "timestamp": "2025-01-05T17:50:46.288",<br/> "message": "주문 성공하였습니다.",<br/> "status": "200 OK",<br/> "content": {<br/> "id": "111",<br/> "status": "PENDING",<br/> "totalAmount": 15000,<br/> "createdAt": "2025-01-05T17:50:46.287279"<br/> }<br/> }                                                                                                                               |
| GET    | `/api/orders/{id}` | 특정 주문 조회       | -                                                                                                                                                                                               | {<br/> "timestamp": "2025-01-05T17:52:49.262",<br/> "message": "Success",<br/> "status": "200 OK",<br/> "content": {<br/> "id": "123",<br/> "status": "CONFIRMED",<br/> "orderItems": [<br/> {<br/> "itemId": "1",<br/> "quantity": 2<br/> },<br/> {<br/> "itemId": "2",<br/> "quantity": 5<br/> }<br/> ],<br/> "totalAmount": 15000,<br/> "createAt": "2025-01-01T12:00:00"<br/> }<br/> } |
| PATCH  | `/api/orders/{id}` | 주문 상태 업데이트(확정) | {<br/> "status": "CONFIRMED"<br/> }                                                                                                                                                             | {"timestamp":"2025-01-05T18:10:47.536","message":"주문이 확정되었습니다.","status":"200 OK","content":{"id":"123","status":"CONFIRMED","updatedAt":"2025-01-05T18:10:47.536336"}}                                                                                                                                                                                                                    |
| PATCH  | `/api/orders/{id}` | 주문 상태 업데이트(취소) | {<br/> "status": "CANCELLED"<br/> }                                                                                                                                                             | {"timestamp":"2025-01-05T18:10:58.294","message":"주문이 취소되었습니다.","status":"200 OK","content":{"id":"234","status":"CANCELLED","updatedAt":"2025-01-05T18:10:58.294452"}}                                                                                                                                                                                                                    |

### 4.2 결제 API
| Method | Endpoint             | Description | Request Body                                     | Response Body                                                                                                                                                                                                                                                              |
|--------|----------------------|-------------|--------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| POST   | `/api/payments`      | 결제 요청       | {<br/> "id": "123",<br/> "method": "CARD"<br/> } | {<br/> "timestamp": "2025-01-05T18:42:50.068",<br/> "message": "결제 성공하였습니다.",<br/> "status": "200 OK",<br/> "content": {<br/> "id": "456",<br/> "status": "INITIATED",<br/> "createdAt": "2025-01-01T12:05:00"<br/> }<br/> }                                               |
| GET    | `/api/payments/{id}` | 결제 상태 조회    | -                                                | {<br/> "timestamp": "2025-01-05T18:44:32.083",<br/> "message": "Success",<br/> "status": "200 OK",<br/> "content": {<br/> "paymentId": "456",<br/> "status": "SUCCESS",<br/> "amount": 15000,<br/> "method": "CARD",<br/> "updatedAt": "2025-01-01T12:10:00"<br/> }<br/> } |

---

## 5️⃣ 상위 상품 조회 API

| Method | Endpoint         | Description | Request Body | Response Body                                                                                                                                                                                                                                                                                                                                                                |
|--------|------------------|-------------|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| GET    | `/api/items/top` | 상위 상품 조회    | -            | {<br/> "timestamp": "2025-01-05T16:59:03.238",<br/> "message": "Success",<br/> "status": "200 OK",<br/> "content": [<br/> {<br/> "id": "3",<br/> "name": "Product A",<br/> "soldCount": 100<br/> },<br/> {<br/> "id": "5",<br/> "name": "Product B",<br/> "soldCount": 80<br/> },<br/> {<br/> "id": "6",<br/> "name": "Product C",<br/> "soldCount": 70<br/> }<br/> ]<br/> } |

---회

## 6️⃣ 장바구니 기능

| Method | Endpoint                    | Description | Request Body                                                        | Response Body                                                                                                                                                                                                                                                                                                                       |
|--------|-----------------------------|-------------|---------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| POST   | `/api/carts`                | 장바구니 추가     | {<br/> "userId": "1",<br/> "itemId": "3",<br/> "quantity": 1<br/> } | {<br/> "timestamp": "2025-01-05T18:44:35.238",<br/> "message": "장바구니 추가 성공하였습니다.",<br/> "status": "200 OK"<br/> }                                                                                                                                                                                                                   |
| DELETE | `/api/carts`                | 장바구니 삭제     | {<br/> "userId": "1",<br/> "itemId": "3" }                          | {<br/> "timestamp": "2025-01-05T18:46:28.738",<br/> "message": "장바구니 상품 삭제 성공하였습니다.",<br/> "status": "200 OK"}                                                                                                                                                                                                                      |
| GET    | `/api/carts/users/{userId}` | 장바구니 조회     | -                                                                   | {<br/> "timestamp": "2025-01-05T18:47:08.526",<br/> "message": "Success",<br/> "status": "200 OK",<br/> "content": [<br/> {<br/> "itemId": "1",<br/> "name": "Item A",<br/> "quantity": 2,<br/> "price": 5000<br/> },<br/> {<br/> "itemId": "2",<br/> "name": "Item B",<br/> "quantity": 6,<br/> "price": 8000<br/> }<br/> ]<br/> } |
